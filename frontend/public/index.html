<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="theme-color" content="#3f51b5" />
    <meta name="description" content="Premium on-demand laundry service with real-time tracking" />

    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

    <!-- Leaflet CSS for map tracking -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <!-- Add <base> tag here if deploying under subdirectory -->
  </head>
  <body>
    <noscript>
      <div style="text-align: center; padding: 50px; font-family: sans-serif;">
        <h1 style="color: #3f51b5;">LaundryPro Service</h1>
        <p>JavaScript is required to run this application.</p>
        <p>Please enable JavaScript in your browser settings.</p>
        <div style="margin-top: 30px;">
          <p>Contact support@laundrypro.com for help</p>
        </div>
      </div>
    </noscript>

    <div id="root"></div>
   <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <!-- Error Boundary Script -->
    <script>
      window.addEventListener('error', function(e) {
        console.error('Uncaught error:', e.error);
        document.getElementById('root').innerHTML = `
          <div style="padding: 20px; color: red">
            <h2>Application Error</h2>
            <p>${e.error?.message || 'Unexpected error occurred'}</p>
            <p>Check console for details</p>
          </div>
        `;
      });
    </script>

    <!-- Lazy-load Fonts -->
    <script>
      const loadCSS = (href) => {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = href;
        document.head.appendChild(link);
      };

      window.addEventListener('DOMContentLoaded', () => {
        loadCSS('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
      });
    </script>

    <!-- Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(reg => console.log('ServiceWorker registered'))
            .catch(err => console.error('ServiceWorker registration failed:', err));
        });
      }
    </script>
  </body>
</html>
